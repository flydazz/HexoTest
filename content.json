{"pages":[],"posts":[{"title":".net core操作数据库","text":"新建实体类User.cs12345678public class User{ public int Id { get; set; } public string UserCode { get; set; } public string Password { get; set; }} 新建TestDbContext.cs1234567891011121314151617public class TestDbContext : DbContext{ public TestDbContext(DbContextOptions&lt;TestDbContext&gt; options) : base(options) { } public DbSet&lt;User&gt; Users { get; set; } protected override void OnModelCreating(ModelBuilder builder) { var channel = builder.Entity&lt;User&gt;(); channel.HasKey(c =&gt; new { c.Id }); channel.HasIndex(c =&gt; new { c.UserCode }); base.OnModelCreating(builder); }} appsettings.json中增加数据库地址配置123&quot;ConnectionStrings&quot;: { &quot;Connection&quot;: &quot;User ID=postgres;Password=123456;Host=192.168.1.101;Port=5432;Database=postgres;Pooling=true;&quot; } 在Startup.cs中的ConfigureServices加如下代码,其中指定版本的原因是因为云上的数据库是9.4版本的，NPGSQL生成的SQL默认最高版本的，在此处指定版本避免脚本报错。12345678910111213public class TestDbContext : DbContext{ //获取数据库连接字符串 var sqlConnectionString = Configuration.GetConnectionString(&quot;Connection&quot;); //添加数据上下文 services.AddDbContext&lt;TestDbContext&gt;(options =&gt; options.UseNpgsql(sqlConnectionString, options =&gt; { options.SetPostgresVersion(new System.Version(&quot;9.4&quot;)); }) );} 使用的时候需要先通过构造函数注入,如下12345678910111213141516public class HomeController : Controller{ private readonly TestDbContext _context; public HomeController(TestDbContext context) { _context = context; } public IActionResult Login(string userCode, string password) { var user = _context.Users.FirstOrDefault(u =&gt; u.UserCode == userCode &amp;&amp; u.Password == password); ... }}","link":"/2020/06/29/net-core%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93/"},{"title":"根据表结构生成实体类","text":"通过系统表sys.columns拼接实体类 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859declare @TableName sysname = 'member_info_svc'declare @Result varchar(max) = 'public class ' + @TableName + '{'select @Result = @Result + ' public ' + ColumnType + NullableSign + ' ' + ColumnName + ' { get; set; }'from( select replace(col.name, ' ', '_') ColumnName, column_id ColumnId, case typ.name when 'bigint' then 'long' when 'binary' then 'byte[]' when 'bit' then 'bool' when 'char' then 'string' when 'date' then 'DateTime' when 'datetime' then 'DateTime' when 'datetime2' then 'DateTime' when 'datetimeoffset' then 'DateTimeOffset' when 'decimal' then 'decimal' when 'float' then 'float' when 'image' then 'byte[]' when 'int' then 'int' when 'money' then 'decimal' when 'nchar' then 'char' when 'ntext' then 'string' when 'numeric' then 'decimal' when 'nvarchar' then 'string' when 'real' then 'double' when 'smalldatetime' then 'DateTime' when 'smallint' then 'short' when 'smallmoney' then 'decimal' when 'text' then 'string' when 'time' then 'TimeSpan' when 'timestamp' then 'DateTime' when 'tinyint' then 'byte' when 'uniqueidentifier' then 'Guid' when 'varbinary' then 'byte[]' when 'varchar' then 'string' else 'UNKNOWN_' + typ.name end ColumnType, case when col.is_nullable = 1 and typ.name in ('bigint', 'bit', 'date', 'datetime', 'datetime2', 'datetimeoffset', 'decimal', 'float', 'int', 'money', 'numeric', 'real', 'smalldatetime', 'smallint', 'smallmoney', 'time', 'tinyint', 'uniqueidentifier') then '?' else '' end NullableSign from sys.columns col join sys.types typ on col.system_type_id = typ.system_type_id AND col.user_type_id = typ.user_type_id where object_id = object_id(@TableName)) torder by ColumnIdset @Result = @Result + '}'print @Result","link":"/2020/06/29/%E6%A0%B9%E6%8D%AE%E8%A1%A8%E7%BB%93%E6%9E%84%E7%94%9F%E6%88%90%E5%AE%9E%E4%BD%93%E7%B1%BB/"},{"title":"HttpClient发送请求忽略证书","text":"coding中经常会请求一些https的地址，但又没有本地证书，可以在Startup.cs中的ConfigureServices加如下代码 123456services.AddSingleton&lt;HttpClient&gt;(i =&gt; { var handler = new HttpClientHandler(); handler.ServerCertificateCustomValidationCallback = HttpClientHandler.DangerousAcceptAnyServerCertificateValidator; return new HttpClient(handler); });","link":"/2020/06/29/HttpClient%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E5%BF%BD%E7%95%A5%E8%AF%81%E4%B9%A6/"},{"title":"GitStudy","text":"克隆远程库功能：①完整的克隆远程库为本地库，②为本地库新建origin别名，③初始化本地库 12git clone &lt;远程库地址&gt;git clone -b &lt;分支名&gt; &lt;远程库地址&gt; 新建README1echo &quot;# project1&quot; &gt;&gt; README.md 添加文件到暂存区1git add README.md git add &lt;file name&gt; 删除暂存区文件1git rm -r --cache .\\src\\CoreStudy.Web\\bin\\ git rm -r –cache &lt;file name&gt; 查看暂存区文件1git ls-files git ls-files 暂存区文件提交到本地库1git commit -m &quot;first commit&quot; git commit -m “提交日志” &lt;file name&gt;：将暂存区的内容提交到本地库 本地库某个分支推送到远程库，分支必须指定1git push -u origin master git push &lt;别名&gt; &lt;分支名&gt; 把远程库的修改拉取到本地git pull &lt;别名&gt; &lt;分支名&gt;：把远程库的修改拉取到本地 git fetch &lt;远程库别名&gt; &lt;远程库分支名&gt;：抓取远程库的指定分支到本地，但没有合并 git merge &lt;远程库别名/远程库分支名&gt;：将抓取下来的远程的分支，跟当前所在分支进行合并 新建ignore文件在根目录下 打开git bash，输入命令 1touch .gitignore 将下面代码copy到生成的.gitignore文件中，提交到git上。 123456789101112131415161718192021222324252627## Ignore Visual Studio temporary files, build results, and## files generated by popular Visual Studio add-ons.# User-specific files*.suo*.user*.userosscache*.sln.docstates# User-specific files (MonoDevelop/Xamarin Studio)*.userprefs# Build results[Dd]ebug/[Dd]ebugPublic/[Rr]elease/[Rr]eleases/x64/x86/bld/[Bb]in/[Oo]bj/[Ll]og/# Visual Studio 2015 cache/options directory.vs/# Uncomment if you have tasks that create the 重命名文件夹1git mv CoreStudy.services Services git mv file_name new_file_name git commit -m’添加注释’ new_file_name写CoreStudy.Services时候有问题，下次遇到再研究","link":"/2020/06/24/GitStudy/"},{"title":"HexoStudy","text":"官方链接Hexo中文网 安装1npm install hexo-cli -g 初始化123hexo init &lt;目录名&gt;cd &lt;目录名&gt;npm install 生成静态文件1hexo generate 也可以简写为 1hexo g 启动服务器1hexo server 默认情况下，访问网址为： http://localhost:4000/ 。 选项 描述 -p, –port 重设端口 -s, –static 只使用静态文件 -l, –log 启动日记记录，使用覆盖记录格式 该命令可以简写为 1hexo s # 部署网站 1hexo deploy 也可以简写为 1hexo d","link":"/2020/06/24/HexoStudy/"}],"tags":[{"name":".NET Core","slug":"NET-Core","link":"/tags/NET-Core/"},{"name":"SQL Server","slug":"SQL-Server","link":"/tags/SQL-Server/"},{"name":"note","slug":"note","link":"/tags/note/"},{"name":"C#","slug":"C","link":"/tags/C/"},{"name":"HttpClient","slug":"HttpClient","link":"/tags/HttpClient/"},{"name":"github","slug":"github","link":"/tags/github/"},{"name":"hexo","slug":"hexo","link":"/tags/hexo/"}],"categories":[{"name":"Study Notes","slug":"Study-Notes","link":"/categories/Study-Notes/"}]}